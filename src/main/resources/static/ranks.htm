<html>
<head>
<title>排行榜</title>
<meta charset="utf-8">
<style>
table, th, td {
	border: 1px solid grey;
	border-collapse: collapse;
	padding: 5px;
}

table tr:nth-child(odd) {
	background-color: #f2f2f2;
}

table tr:nth-child(even) {
	background-color: #ffffff;
}
</style>
</head>

<body>
	<div ng-app="resultsApp" ng-controller="resultsController">

		<table>
			<tr>
				<th>排名</th>
				<th>名字</th>
				<th>运算</th>
				<th>总</th>
				<th>正确</th>
				<th>分</th>
				<th>耗时</th>
				<th>速度</th>
				<th>时间</th>
			</tr>

			<tr ng-repeat="result in results | orderBy:orderRanks:true">
				<td>{{ $index + 1 }}</td>
				<td>{{ result.username }}</td>
				<td>{{ result.operand }}</td>
				<td>{{ result.total }}</td>
				<td>{{ result.correct }}</td>
				<td>{{ 100 * result.correct / result.total }}</td>
				<td>{{ result.consume }}</td>
				<td>{{ result.consume / result.total }}</td>
				<td>{{ result.createTime }}</td>
			</tr>
		</table>
	</div>

<script src="js/angular.min.js"></script>
<script>
	var app = angular.module('resultsApp', []);
	app.controller('resultsController', function($scope, $http) {
		var url = "/getRanks";

		$http.get(url).then(function(response) {
			$scope.results = response.data;
		});

		$scope.orderRanks = function(result) {
			return 2 * result.correct - result.total;
		}
	});
</script>

</body>
</html>